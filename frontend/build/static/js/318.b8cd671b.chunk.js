"use strict";(self.webpackChunkaudio_host=self.webpackChunkaudio_host||[]).push([[318],{9944:(c,p,y)=>{var C=y(4994);p.A=void 0;var w=C(y(39)),S=y(579);p.A=(0,w.default)((0,S.jsx)("path",{d:"m5.58 16.89 5.77-4.07c.56-.4.56-1.24 0-1.63L5.58 7.11C4.91 6.65 4 7.12 4 7.93v8.14c0 .81.91 1.28 1.58.82M13 7.93v8.14c0 .81.91 1.28 1.58.82l5.77-4.07c.56-.4.56-1.24 0-1.63l-5.77-4.07c-.67-.47-1.58 0-1.58.81"}),"FastForwardRounded")},1556:(c,p,y)=>{var C=y(4994);p.A=void 0;var w=C(y(39)),S=y(579);p.A=(0,w.default)((0,S.jsx)("path",{d:"M11 16.07V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.56.4-.56 1.24 0 1.63l5.77 4.07c.67.47 1.58 0 1.58-.81m1.66-3.25 5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64"}),"FastRewindRounded")},1255:(c,p,y)=>{var C=y(4994);p.A=void 0;var w=C(y(39)),S=y(579);p.A=(0,w.default)((0,S.jsx)("path",{d:"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2m6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2"}),"PauseRounded")},5040:(c,p,y)=>{var C=y(4994);p.A=void 0;var w=C(y(39)),S=y(579);p.A=(0,w.default)((0,S.jsx)("path",{d:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82"}),"PlayArrowRounded")},5258:(c,p,y)=>{var C=y(4994);p.A=void 0;var w=C(y(39)),S=y(579);p.A=(0,w.default)((0,S.jsx)("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"}),"SkipNext")},2398:(c,p,y)=>{var C=y(4994);p.A=void 0;var w=C(y(39)),S=y(579);p.A=(0,w.default)((0,S.jsx)("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"}),"SkipPrevious")},2110:(c,p,y)=>{y.d(p,{A:()=>W});var C=y(8168),w=y(8587),S=y(5043),M=y(8387),x=y(8610),k=y(4535),E=y(8206),A=y(3336),P=y(2532),R=y(2372);function getCardUtilityClass(c){return(0,R.Ay)("MuiCard",c)}(0,P.A)("MuiCard",["root"]);var T=y(579);const D=["className","raised"],L=(0,k.Ay)(A.A,{name:"MuiCard",slot:"Root",overridesResolver:(c,p)=>p.root})((()=>({overflow:"hidden"}))),W=S.forwardRef((function Card(c,p){const y=(0,E.b)({props:c,name:"MuiCard"}),{className:S,raised:k=!1}=y,A=(0,w.A)(y,D),P=(0,C.A)({},y,{raised:k}),R=(c=>{const{classes:p}=c;return(0,x.A)({root:["root"]},getCardUtilityClass,p)})(P);return(0,T.jsx)(L,(0,C.A)({className:(0,M.A)(R.root,S),elevation:k?8:void 0,ref:p,ownerState:P},A))}))},6591:(c,p,y)=>{y.d(p,{A:()=>O});var C=y(8587),w=y(8168),S=y(5043),M=y(8387),x=y(8610),k=y(8206),E=y(4535),A=y(2532),P=y(2372);function getCardMediaUtilityClass(c){return(0,P.Ay)("MuiCardMedia",c)}(0,A.A)("MuiCardMedia",["root","media","img"]);var R=y(579);const T=["children","className","component","image","src","style"],D=(0,E.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(c,p)=>{const{ownerState:y}=c,{isMediaComponent:C,isImageComponent:w}=y;return[p.root,C&&p.media,w&&p.img]}})((c=>{let{ownerState:p}=c;return(0,w.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},p.isMediaComponent&&{width:"100%"},p.isImageComponent&&{objectFit:"cover"})})),L=["video","audio","picture","iframe","img"],W=["picture","img"],O=S.forwardRef((function CardMedia(c,p){const y=(0,k.b)({props:c,name:"MuiCardMedia"}),{children:S,className:E,component:A="div",image:P,src:O,style:N}=y,j=(0,C.A)(y,T),_=-1!==L.indexOf(A),z=!_&&P?(0,w.A)({backgroundImage:'url("'.concat(P,'")')},N):N,B=(0,w.A)({},y,{component:A,isMediaComponent:_,isImageComponent:-1!==W.indexOf(A)}),I=(c=>{const{classes:p,isMediaComponent:y,isImageComponent:C}=c,w={root:["root",y&&"media",C&&"img"]};return(0,x.A)(w,getCardMediaUtilityClass,p)})(B);return(0,R.jsx)(D,(0,w.A)({className:(0,M.A)(I.root,E),as:A,role:!_&&P?"img":void 0,ref:p,style:z,ownerState:B,src:_?P||O:void 0},j,{children:S}))}))},8911:(c,p,y)=>{y.d(p,{A:()=>I});var C=y(8587),w=y(8168),S=y(5043),M=y(8387),x=y(9172),k=y(2372),E=y(8610),A=y(6060),P=y(2919),R=y(8698),T=y(8280),D=y(9751),L=y(8604),W=y(579);const O=["component","direction","spacing","divider","children","className","useFlexGap"],N=(0,T.A)(),j=(0,A.A)("div",{name:"MuiStack",slot:"Root",overridesResolver:(c,p)=>p.root});function useThemePropsDefault(c){return(0,P.A)({props:c,name:"MuiStack",defaultTheme:N})}function joinChildren(c,p){const y=S.Children.toArray(c).filter(Boolean);return y.reduce(((c,C,w)=>(c.push(C),w<y.length-1&&c.push(S.cloneElement(p,{key:"separator-".concat(w)})),c)),[])}const style=c=>{let{ownerState:p,theme:y}=c,C=(0,w.A)({display:"flex",flexDirection:"column"},(0,D.NI)({theme:y},(0,D.kW)({values:p.direction,breakpoints:y.breakpoints.values}),(c=>({flexDirection:c}))));if(p.spacing){const c=(0,L.LX)(y),w=Object.keys(y.breakpoints.values).reduce(((c,y)=>(("object"===typeof p.spacing&&null!=p.spacing[y]||"object"===typeof p.direction&&null!=p.direction[y])&&(c[y]=!0),c)),{}),S=(0,D.kW)({values:p.direction,base:w}),M=(0,D.kW)({values:p.spacing,base:w});"object"===typeof S&&Object.keys(S).forEach(((c,p,y)=>{if(!S[c]){const C=p>0?S[y[p-1]]:"column";S[c]=C}}));const styleFromPropValue=(y,C)=>{return p.useFlexGap?{gap:(0,L._W)(c,y)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((w=C?S[C]:p.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[w]))]:(0,L._W)(c,y)}};var w};C=(0,x.A)(C,(0,D.NI)({theme:y},M,styleFromPropValue))}return C=(0,D.iZ)(y.breakpoints,C),C};var _=y(4535),z=y(8206);const B=function createStack(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:p=j,useThemeProps:y=useThemePropsDefault,componentName:x="MuiStack"}=c,A=p(style),P=S.forwardRef((function Grid(c,p){const S=y(c),P=(0,R.A)(S),{component:T="div",direction:D="column",spacing:L=0,divider:N,children:j,className:_,useFlexGap:z=!1}=P,B=(0,C.A)(P,O),I={direction:D,spacing:L,useFlexGap:z},F=(0,E.A)({root:["root"]},(c=>(0,k.Ay)(x,c)),{});return(0,W.jsx)(A,(0,w.A)({as:T,ownerState:I,ref:p,className:(0,M.A)(F.root,_)},B,{children:N?joinChildren(j,N):j}))}));return P}({createStyledComponent:(0,_.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(c,p)=>p.root}),useThemeProps:c=>(0,z.b)({props:c,name:"MuiStack"})}),I=B},5577:(c,p,y)=>{y.d(p,{A:()=>r});class t{constructor(){this.listeners={}}on(c,p,y){if(this.listeners[c]||(this.listeners[c]=new Set),this.listeners[c].add(p),null==y?void 0:y.once){const s=()=>{this.un(c,s),this.un(c,p)};return this.on(c,s),s}return()=>this.un(c,p)}un(c,p){var y;null===(y=this.listeners[c])||void 0===y||y.delete(p)}once(c,p){return this.on(c,p,{once:!0})}unAll(){this.listeners={}}emit(c){for(var p=arguments.length,y=new Array(p>1?p-1:0),C=1;C<p;C++)y[C-1]=arguments[C];this.listeners[c]&&this.listeners[c].forEach((c=>c(...y)))}}class e extends t{constructor(c){super(),this.subscriptions=[],this.options=c}onInit(){}_init(c){this.wavesurfer=c,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((c=>c()))}}function s(c,p){const y=p.xmlns?document.createElementNS(p.xmlns,c):document.createElement(c);for(const[C,w]of Object.entries(p))if("children"===C)for(const[c,S]of Object.entries(p))"string"==typeof S?y.appendChild(document.createTextNode(S)):y.appendChild(s(c,S));else"style"===C?Object.assign(y.style,w):"textContent"===C?y.textContent=w:y.setAttribute(C,w.toString());return y}function i(c,p,y){const C=s(c,p||{});return null==y||y.appendChild(C),C}const C={lineWidth:1,labelSize:11,formatTimeCallback:c=>"".concat(Math.floor(c/60),":").concat("0".concat(Math.floor(c)%60).slice(-2))};class r extends e{constructor(c){super(c||{}),this.unsubscribe=()=>{},this.onPointerMove=c=>{if(!this.wavesurfer)return;const p=this.wavesurfer.getWrapper().getBoundingClientRect(),{width:y}=p,C=c.clientX-p.left,w=Math.min(1,Math.max(0,C/y)),S=Math.min(y-this.options.lineWidth-1,C);this.wrapper.style.transform="translateX(".concat(S,"px)"),this.wrapper.style.opacity="1";const M=this.wavesurfer.getDuration()||0;this.label.textContent=this.options.formatTimeCallback(M*w);const x=this.label.offsetWidth;this.label.style.transform=S+x>y?"translateX(-".concat(x+this.options.lineWidth,"px)"):"",this.emit("hover",w)},this.onPointerLeave=()=>{this.wrapper.style.opacity="0"},this.options=Object.assign({},C,c),this.wrapper=i("div",{part:"hover"}),this.label=i("span",{part:"hover-label"},this.wrapper)}static create(c){return new r(c)}addUnits(c){return"".concat(c).concat("number"==typeof c?"px":"")}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");const c=this.wavesurfer.options,p=this.options.lineColor||c.cursorColor||c.progressColor;Object.assign(this.wrapper.style,{position:"absolute",zIndex:10,left:0,top:0,height:"100%",pointerEvents:"none",borderLeft:"".concat(this.addUnits(this.options.lineWidth)," solid ").concat(p),opacity:"0",transition:"opacity .1s ease-in"}),Object.assign(this.label.style,{display:"block",backgroundColor:this.options.labelBackground,color:this.options.labelColor,fontSize:"".concat(this.addUnits(this.options.labelSize)),transition:"transform .1s ease-in",padding:"2px 3px"});const y=this.wavesurfer.getWrapper();y.appendChild(this.wrapper),y.addEventListener("pointermove",this.onPointerMove),y.addEventListener("pointerleave",this.onPointerLeave),y.addEventListener("wheel",this.onPointerMove),this.unsubscribe=()=>{y.removeEventListener("pointermove",this.onPointerMove),y.removeEventListener("pointerleave",this.onPointerLeave),y.removeEventListener("wheel",this.onPointerLeave)}}destroy(){super.destroy(),this.unsubscribe(),this.wrapper.remove()}}},3762:(c,p,y)=>{function t(c,p,y,C){return new(y||(y=Promise))((function(w,S){function o(c){try{h(C.next(c))}catch(c){S(c)}}function a(c){try{h(C.throw(c))}catch(c){S(c)}}function h(c){var p;c.done?w(c.value):(p=c.value,p instanceof y?p:new y((function(c){c(p)}))).then(o,a)}h((C=C.apply(c,p||[])).next())}))}y.d(p,{A:()=>u}),"function"==typeof SuppressedError&&SuppressedError;class e{constructor(){this.listeners={}}on(c,p,y){if(this.listeners[c]||(this.listeners[c]=new Set),this.listeners[c].add(p),null==y?void 0:y.once){const i=()=>{this.un(c,i),this.un(c,p)};return this.on(c,i),i}return()=>this.un(c,p)}un(c,p){var y;null===(y=this.listeners[c])||void 0===y||y.delete(p)}once(c,p){return this.on(c,p,{once:!0})}unAll(){this.listeners={}}emit(c){for(var p=arguments.length,y=new Array(p>1?p-1:0),C=1;C<p;C++)y[C-1]=arguments[C];this.listeners[c]&&this.listeners[c].forEach((c=>c(...y)))}}const C={decode:function(c,p){return t(this,void 0,void 0,(function*(){const y=new AudioContext({sampleRate:p});return y.decodeAudioData(c).finally((()=>y.close()))}))},createBuffer:function(c,p){return"number"==typeof c[0]&&(c=[c]),function(c){const p=c[0];if(p.some((c=>c>1||c<-1))){const y=p.length;let C=0;for(let c=0;c<y;c++){const y=Math.abs(p[c]);y>C&&(C=y)}for(const p of c)for(let c=0;c<y;c++)p[c]/=C}}(c),{duration:p,length:c[0].length,sampleRate:c[0].length/p,numberOfChannels:c.length,getChannelData:p=>null==c?void 0:c[p],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function s(c,p){const y=p.xmlns?document.createElementNS(p.xmlns,c):document.createElement(c);for(const[C,w]of Object.entries(p))if("children"===C)for(const[c,S]of Object.entries(p))"string"==typeof S?y.appendChild(document.createTextNode(S)):y.appendChild(s(c,S));else"style"===C?Object.assign(y.style,w):"textContent"===C?y.textContent=w:y.setAttribute(C,w.toString());return y}function n(c,p,y){const C=s(c,p||{});return null==y||y.appendChild(C),C}var w=Object.freeze({__proto__:null,createElement:n,default:n});const S={fetchBlob:function(c,p,y){return t(this,void 0,void 0,(function*(){const C=yield fetch(c,y);if(C.status>=400)throw new Error("Failed to fetch ".concat(c,": ").concat(C.status," (").concat(C.statusText,")"));return function(c,p){t(this,void 0,void 0,(function*(){if(!c.body||!c.headers)return;const y=c.body.getReader(),C=Number(c.headers.get("Content-Length"))||0;let w=0;const o=c=>t(this,void 0,void 0,(function*(){w+=(null==c?void 0:c.length)||0;const y=Math.round(w/C*100);p(y)})),a=()=>t(this,void 0,void 0,(function*(){let c;try{c=yield y.read()}catch(c){return}c.done||(o(c.value),yield a())}));a()}))}(C.clone(),p),C.blob()}))}};class a extends e{constructor(c){super(),this.isExternalMedia=!1,c.media?(this.media=c.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),c.mediaControls&&(this.media.controls=!0),c.autoplay&&(this.media.autoplay=!0),null!=c.playbackRate&&this.onMediaEvent("canplay",(()=>{null!=c.playbackRate&&(this.media.playbackRate=c.playbackRate)}),{once:!0})}onMediaEvent(c,p,y){return this.media.addEventListener(c,p,y),()=>this.media.removeEventListener(c,p,y)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const c=this.getSrc();c.startsWith("blob:")&&URL.revokeObjectURL(c)}canPlayType(c){return""!==this.media.canPlayType(c)}setSrc(c,p){const y=this.getSrc();if(c&&y===c)return;this.revokeSrc();const C=p instanceof Blob&&(this.canPlayType(p.type)||!c)?URL.createObjectURL(p):c;try{this.media.src=C}catch(p){this.media.src=c}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(c){this.media=c}play(){return t(this,void 0,void 0,(function*(){return this.media.play()}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(c){this.media.currentTime=c}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(c){this.media.volume=c}getMuted(){return this.media.muted}setMuted(c){this.media.muted=c}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(c,p){null!=p&&(this.media.preservesPitch=p),this.media.playbackRate=c}getMediaElement(){return this.media}setSinkId(c){return this.media.setSinkId(c)}}class h extends e{constructor(c,p){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=c;const y=this.parentFromOptionsContainer(c.container);this.parent=y;const[C,w]=this.initHtml();y.appendChild(C),this.container=C,this.scrollContainer=w.querySelector(".scroll"),this.wrapper=w.querySelector(".wrapper"),this.canvasWrapper=w.querySelector(".canvases"),this.progressWrapper=w.querySelector(".progress"),this.cursor=w.querySelector(".cursor"),p&&w.appendChild(p),this.initEvents()}parentFromOptionsContainer(c){let p;if("string"==typeof c?p=document.querySelector(c):c instanceof HTMLElement&&(p=c),!p)throw new Error("Container not found");return p}initEvents(){const t=c=>{const p=this.wrapper.getBoundingClientRect(),y=c.clientX-p.left,C=c.clientY-p.top;return[y/p.width,C/p.height]};if(this.wrapper.addEventListener("click",(c=>{const[p,y]=t(c);this.emit("click",p,y)})),this.wrapper.addEventListener("dblclick",(c=>{const[p,y]=t(c);this.emit("dblclick",p,y)})),!0!==this.options.dragToSeek&&"object"!=typeof this.options.dragToSeek||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:c,scrollWidth:p,clientWidth:y}=this.scrollContainer,C=c/p,w=(c+y)/p;this.emit("scroll",C,w,c,c+y)})),"function"==typeof ResizeObserver){const c=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{c().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const c=this.parent.clientWidth;c===this.lastContainerWidth&&"auto"!==this.options.height||(this.lastContainerWidth=c,this.reRender())}initDrag(){this.subscriptions.push(function(c,p,y,C){let w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,S=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100;if(!c)return()=>{};const x=matchMedia("(pointer: coarse)").matches;let h=()=>{};const l=k=>{if(k.button!==S)return;k.preventDefault(),k.stopPropagation();let E=k.clientX,A=k.clientY,P=!1;const R=Date.now(),m=C=>{if(C.preventDefault(),C.stopPropagation(),x&&Date.now()-R<M)return;const S=C.clientX,k=C.clientY,T=S-E,D=k-A;if(P||Math.abs(T)>w||Math.abs(D)>w){const C=c.getBoundingClientRect(),{left:w,top:M}=C;P||(null==y||y(E-w,A-M),P=!0),p(T,D,S-w,k-M),E=S,A=k}},g=p=>{if(P){const y=p.clientX,w=p.clientY,S=c.getBoundingClientRect(),{left:M,top:x}=S;null==C||C(y-M,w-x)}h()},f=c=>{c.relatedTarget&&c.relatedTarget!==document.documentElement||g(c)},v=c=>{P&&(c.stopPropagation(),c.preventDefault())},b=c=>{P&&c.preventDefault()};document.addEventListener("pointermove",m),document.addEventListener("pointerup",g),document.addEventListener("pointerout",f),document.addEventListener("pointercancel",f),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("click",v,{capture:!0}),h=()=>{document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g),document.removeEventListener("pointerout",f),document.removeEventListener("pointercancel",f),document.removeEventListener("touchmove",b),setTimeout((()=>{document.removeEventListener("click",v,{capture:!0})}),10)}};return c.addEventListener("pointerdown",l),()=>{h(),c.removeEventListener("pointerdown",l)}}(this.wrapper,((c,p,y)=>{this.emit("drag",Math.max(0,Math.min(1,y/this.wrapper.getBoundingClientRect().width)))}),(c=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,c/this.wrapper.getBoundingClientRect().width)))}),(c=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,c/this.wrapper.getBoundingClientRect().width)))})))}getHeight(c,p){var y;const C=(null===(y=this.audioData)||void 0===y?void 0:y.numberOfChannels)||1;if(null==c)return 128;if(!isNaN(Number(c)))return Number(c);if("auto"===c){const c=this.parent.clientHeight||128;return(null==p?void 0:p.every((c=>!c.overlay)))?c/C:c}return 128}initHtml(){const c=document.createElement("div"),p=c.attachShadow({mode:"open"});return p.innerHTML="\n      <style>\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ".concat(this.getHeight(this.options.height,this.options.splitChannels),'px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class="scroll" part="scroll">\n        <div class="wrapper" part="wrapper">\n          <div class="canvases" part="canvases"></div>\n          <div class="progress" part="progress"></div>\n          <div class="cursor" part="cursor"></div>\n        </div>\n      </div>\n    '),[c,p]}setOptions(c){if(this.options.container!==c.container){const p=this.parentFromOptionsContainer(c.container);p.appendChild(this.container),this.parent=p}!0!==c.dragToSeek&&"object"!=typeof this.options.dragToSeek||this.initDrag(),this.options=c,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(c){this.scrollContainer.scrollLeft=c}setScrollPercentage(c){const{scrollWidth:p}=this.scrollContainer,y=p*c;this.setScroll(y)}destroy(){var c,p;this.subscriptions.forEach((c=>c())),this.container.remove(),null===(c=this.resizeObserver)||void 0===c||c.disconnect(),null===(p=this.unsubscribeOnScroll)||void 0===p||p.call(this)}createDelay(){let c,p,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const s=()=>{c&&clearTimeout(c),p&&p()};return this.timeouts.push(s),()=>new Promise(((C,w)=>{s(),p=w,c=setTimeout((()=>{c=void 0,p=void 0,C()}),y)}))}convertColorValues(c){if(!Array.isArray(c))return c||"";if(c.length<2)return c[0]||"";const p=document.createElement("canvas"),y=p.getContext("2d"),C=p.height*(window.devicePixelRatio||1),w=y.createLinearGradient(0,0,0,C),S=1/(c.length-1);return c.forEach(((c,p)=>{const y=p*S;w.addColorStop(y,c)})),w}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(c,p,y,C){const w=c[0],S=c[1]||c[0],M=w.length,{width:x,height:k}=y.canvas,E=k/2,A=this.getPixelRatio(),P=p.barWidth?p.barWidth*A:1,R=p.barGap?p.barGap*A:p.barWidth?P/2:0,T=p.barRadius||0,D=x/(P+R)/M,L=T&&"roundRect"in y?"roundRect":"rect";y.beginPath();let W=0,O=0,N=0;for(let j=0;j<=M;j++){const c=Math.round(j*D);if(c>W){const w=Math.round(O*E*C),S=w+Math.round(N*E*C)||1;let M=E-w;"top"===p.barAlign?M=0:"bottom"===p.barAlign&&(M=k-S),y[L](W*(P+R),M,P,S,T),W=c,O=0,N=0}const M=Math.abs(w[j]||0),x=Math.abs(S[j]||0);M>O&&(O=M),x>N&&(N=x)}y.fill(),y.closePath()}renderLineWaveform(c,p,y,C){const n=p=>{const w=c[p]||c[0],S=w.length,{height:M}=y.canvas,x=M/2,k=y.canvas.width/S;y.moveTo(0,x);let E=0,A=0;for(let c=0;c<=S;c++){const S=Math.round(c*k);if(S>E){const c=x+(Math.round(A*x*C)||1)*(0===p?-1:1);y.lineTo(E,c),E=S,A=0}const M=Math.abs(w[c]||0);M>A&&(A=M)}y.lineTo(E,x)};y.beginPath(),n(0),n(1),y.fill(),y.closePath()}renderWaveform(c,p,y){if(y.fillStyle=this.convertColorValues(p.waveColor),p.renderFunction)return void p.renderFunction(c,y);let C=p.barHeight||1;if(p.normalize){const p=Array.from(c[0]).reduce(((c,p)=>Math.max(c,Math.abs(p))),0);C=p?1/p:1}p.barWidth||p.barGap||p.barAlign?this.renderBarWaveform(c,p,y,C):this.renderLineWaveform(c,p,y,C)}renderSingleCanvas(c,p,y,C,w,S,M){const x=this.getPixelRatio(),k=document.createElement("canvas");k.width=Math.round(y*x),k.height=Math.round(C*x),k.style.width="".concat(y,"px"),k.style.height="".concat(C,"px"),k.style.left="".concat(Math.round(w),"px"),S.appendChild(k);const E=k.getContext("2d");if(this.renderWaveform(c,p,E),k.width>0&&k.height>0){const c=k.cloneNode(),y=c.getContext("2d");y.drawImage(k,0,0),y.globalCompositeOperation="source-in",y.fillStyle=this.convertColorValues(p.progressColor),y.fillRect(0,0,k.width,k.height),M.appendChild(c)}}renderMultiCanvas(c,p,y,C,w,S){const M=this.getPixelRatio(),{clientWidth:x}=this.scrollContainer;if(x*M>=y)return void this.renderSingleCanvas(c,p,x,C,0,w,S);const k=y/M;let E=Math.min(h.MAX_CANVAS_WIDTH,x,k),A={};if(p.barWidth||p.barGap){const c=p.barWidth||.5,y=c+(p.barGap||c/2);E%y!=0&&(E=Math.floor(E/y)*y)}const u=y=>{if(y<0||y>=P)return;if(A[y])return;A[y]=!0;const M=y*E,x=Math.min(k-M,E);if(x<=0)return;const R=c.map((c=>{const p=Math.floor(M/k*c.length),y=Math.floor((M+x)/k*c.length);return c.slice(p,y)}));this.renderSingleCanvas(R,p,x,C,M,w,S)},P=Math.ceil(k/E),R=this.scrollContainer.scrollLeft/k,T=Math.floor(R*P);u(T-1),u(T),u(T+1),P>1&&(this.unsubscribeOnScroll=this.on("scroll",(()=>{const{scrollLeft:c}=this.scrollContainer,p=Math.floor(c/k*P);Object.keys(A).length>h.MAX_NODES&&(w.innerHTML="",S.innerHTML="",A={}),u(p-1),u(p),u(p+1)})))}renderChannel(c,p,y,C){var{overlay:w}=p,S=function(c,p){var y={};for(var C in c)Object.prototype.hasOwnProperty.call(c,C)&&p.indexOf(C)<0&&(y[C]=c[C]);if(null!=c&&"function"==typeof Object.getOwnPropertySymbols){var w=0;for(C=Object.getOwnPropertySymbols(c);w<C.length;w++)p.indexOf(C[w])<0&&Object.prototype.propertyIsEnumerable.call(c,C[w])&&(y[C[w]]=c[C[w]])}return y}(p,["overlay"]);const M=document.createElement("div"),x=this.getHeight(S.height,S.splitChannels);M.style.height="".concat(x,"px"),w&&C>0&&(M.style.marginTop="-".concat(x,"px")),this.canvasWrapper.style.minHeight="".concat(x,"px"),this.canvasWrapper.appendChild(M);const k=M.cloneNode();this.progressWrapper.appendChild(k),this.renderMultiCanvas(c,S,y,x,M,k)}render(c){return t(this,void 0,void 0,(function*(){var p;this.timeouts.forEach((c=>c())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",null!=this.options.width&&(this.scrollContainer.style.width="number"==typeof this.options.width?"".concat(this.options.width,"px"):this.options.width);const y=this.getPixelRatio(),C=this.scrollContainer.clientWidth,w=Math.ceil(c.duration*(this.options.minPxPerSec||0));this.isScrollable=w>C;const S=this.options.fillParent&&!this.isScrollable,M=(S?C:w)*y;if(this.wrapper.style.width=S?"100%":"".concat(w,"px"),this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor="".concat(this.options.cursorColor||this.options.progressColor),this.cursor.style.width="".concat(this.options.cursorWidth,"px"),this.audioData=c,this.emit("render"),this.options.splitChannels)for(let x=0;x<c.numberOfChannels;x++){const y=Object.assign(Object.assign({},this.options),null===(p=this.options.splitChannels)||void 0===p?void 0:p[x]);this.renderChannel([c.getChannelData(x)],y,M,x)}else{const p=[c.getChannelData(0)];c.numberOfChannels>1&&p.push(c.getChannelData(1)),this.renderChannel(p,this.options,M,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){var c;if(null===(c=this.unsubscribeOnScroll)||void 0===c||c.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:p}=this.scrollContainer,{right:y}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&p!==this.scrollContainer.scrollWidth){const{right:c}=this.progressWrapper.getBoundingClientRect();let p=c-y;p*=2,p=p<0?Math.floor(p):Math.ceil(p),p/=2,this.scrollContainer.scrollLeft+=p}}zoom(c){this.options.minPxPerSec=c,this.reRender()}scrollIntoView(c){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{scrollLeft:y,scrollWidth:C,clientWidth:w}=this.scrollContainer,S=c*C,M=y,x=y+w,k=w/2;if(this.isDragging){const c=30;S+c>x?this.scrollContainer.scrollLeft+=c:S-c<M&&(this.scrollContainer.scrollLeft-=c)}else{(S<M||S>x)&&(this.scrollContainer.scrollLeft=S-(this.options.autoCenter?k:0));const c=S-y-k;p&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,p=c/C,y=(c+w)/C;this.emit("scroll",p,y,c,c+w)}}renderProgress(c,p){if(isNaN(c))return;const y=100*c;this.canvasWrapper.style.clipPath="polygon(".concat(y,"% 0, 100% 0, 100% 100%, ").concat(y,"% 100%)"),this.progressWrapper.style.width="".concat(y,"%"),this.cursor.style.left="".concat(y,"%"),this.cursor.style.transform="translateX(-".concat(100===Math.round(y)?this.options.cursorWidth:0,"px)"),this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(c,p)}exportImage(c,p,y){return t(this,void 0,void 0,(function*(){const C=this.canvasWrapper.querySelectorAll("canvas");if(!C.length)throw new Error("No waveform data");if("dataURL"===y){const y=Array.from(C).map((y=>y.toDataURL(c,p)));return Promise.resolve(y)}return Promise.all(Array.from(C).map((y=>new Promise(((C,w)=>{y.toBlob((c=>{c?C(c):w(new Error("Could not export image"))}),c,p)})))))}))}}h.MAX_CANVAS_WIDTH=8e3,h.MAX_NODES=10;class l extends e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",(()=>{requestAnimationFrame((()=>{this.emit("tick")}))})),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class d extends e{constructor(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new AudioContext;super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=c,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return t(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(c){if(this.currentSrc=c,this._duration=void 0,!c)return this.buffer=null,void this.emit("emptied");fetch(c).then((p=>{if(p.status>=400)throw new Error("Failed to fetch ".concat(c,": ").concat(p.status," (").concat(p.statusText,")"));return p.arrayBuffer()})).then((p=>this.currentSrc!==c?null:this.audioContext.decodeAudioData(p))).then((p=>{this.currentSrc===c&&(this.buffer=p,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}))}_play(){var c;if(!this.paused)return;this.paused=!1,null===(c=this.bufferNode)||void 0===c||c.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let p=this.playedDuration*this._playbackRate;p>=this.duration&&(p=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,p),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var c;this.paused=!0,null===(c=this.bufferNode)||void 0===c||c.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return t(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(c){var p,y;const C=c-this.currentTime;null===(p=this.bufferNode)||void 0===p||p.stop(this.audioContext.currentTime+C),null===(y=this.bufferNode)||void 0===y||y.addEventListener("ended",(()=>{this.bufferNode=null,this.pause()}),{once:!0})}setSinkId(c){return t(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(c)}))}get playbackRate(){return this._playbackRate}set playbackRate(c){this._playbackRate=c,this.bufferNode&&(this.bufferNode.playbackRate.value=c)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(c){const p=!this.paused;p&&this._pause(),this.playedDuration=c/this._playbackRate,p&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var c,p;return null!==(c=this._duration)&&void 0!==c?c:(null===(p=this.buffer)||void 0===p?void 0:p.duration)||0}set duration(c){this._duration=c}get volume(){return this.gainNode.gain.value}set volume(c){this.gainNode.gain.value=c,this.emit("volumechange")}get muted(){return this._muted}set muted(c){this._muted!==c&&(this._muted=c,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(c){return/^(audio|video)\//.test(c)}getGainNode(){return this.gainNode}getChannelData(){const c=[];if(!this.buffer)return c;const p=this.buffer.numberOfChannels;for(let y=0;y<p;y++)c.push(this.buffer.getChannelData(y));return c}}const M={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class u extends a{static create(c){return new u(c)}constructor(c){const p=c.media||("WebAudio"===c.backend?new d:void 0);super({media:p,mediaControls:c.mediaControls,autoplay:c.autoplay,playbackRate:c.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},M,c),this.timer=new l;const y=p?void 0:this.getMediaElement();this.renderer=new h(this.options,y),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const C=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:c,duration:p}=this.options;(C||c&&p)&&this.load(C,c,p).catch((()=>null))}))}updateProgress(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getCurrentTime();return this.renderer.renderProgress(c/this.getDuration(),this.isPlaying()),c}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const c=this.updateProgress();this.emit("timeupdate",c),this.emit("audioprocess",c)}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const c=this.updateProgress();this.emit("timeupdate",c)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop()})),this.onMediaEvent("emptied",(()=>{this.timer.stop()})),this.onMediaEvent("ended",(()=>{this.emit("finish")})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(c=>{this.emit("error",c.error)})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((c,p)=>{this.options.interact&&(this.seekTo(c),this.emit("interaction",c*this.getDuration()),this.emit("click",c,p))})),this.renderer.on("dblclick",((c,p)=>{this.emit("dblclick",c,p)})),this.renderer.on("scroll",((c,p,y,C)=>{const w=this.getDuration();this.emit("scroll",c*w,p*w,y,C)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(c=>{this.emit("dragstart",c)})),this.renderer.on("dragend",(c=>{this.emit("dragend",c)})));{let c;this.subscriptions.push(this.renderer.on("drag",(p=>{if(!this.options.interact)return;let y;this.renderer.renderProgress(p),clearTimeout(c),this.isPlaying()?y=0:!0===this.options.dragToSeek?y=200:"object"==typeof this.options.dragToSeek&&void 0!==this.options.dragToSeek&&(y=this.options.dragToSeek.debounceTime),c=setTimeout((()=>{this.seekTo(p)}),y),this.emit("interaction",p*this.getDuration()),this.emit("drag",p)})))}}initPlugins(){var c;(null===(c=this.options.plugins)||void 0===c?void 0:c.length)&&this.options.plugins.forEach((c=>{this.registerPlugin(c)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((c=>c())),this.mediaSubscriptions=[]}setOptions(c){this.options=Object.assign({},this.options,c),this.renderer.setOptions(this.options),c.audioRate&&this.setPlaybackRate(c.audioRate),null!=c.mediaControls&&(this.getMediaElement().controls=c.mediaControls)}registerPlugin(c){return c._init(this),this.plugins.push(c),this.subscriptions.push(c.once("destroy",(()=>{this.plugins=this.plugins.filter((p=>p!==c))}))),c}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(c){return this.renderer.setScroll(c)}setScrollTime(c){const p=c/this.getDuration();this.renderer.setScrollPercentage(p)}getActivePlugins(){return this.plugins}loadAudio(c,p,y,w){return t(this,void 0,void 0,(function*(){var M;if(this.emit("load",c),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!p&&!y){const y=this.options.fetchParams||{};window.AbortController&&!y.signal&&(this.abortController=new AbortController,y.signal=null===(M=this.abortController)||void 0===M?void 0:M.signal);const n=c=>this.emit("loading",c);p=yield S.fetchBlob(c,n,y)}this.setSrc(c,p);const x=yield new Promise((c=>{const p=w||this.getDuration();p?c(p):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>c(this.getDuration())),{once:!0}))}));if(!c&&!p){const c=this.getMediaElement();c instanceof d&&(c.duration=x)}if(y)this.decodedData=C.createBuffer(y,x||0);else if(p){const c=yield p.arrayBuffer();this.decodedData=yield C.decode(c,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(c,p,y){return t(this,void 0,void 0,(function*(){try{return yield this.loadAudio(c,void 0,p,y)}catch(t){throw this.emit("error",t),t}}))}loadBlob(c,p,y){return t(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",c,p,y)}catch(t){throw this.emit("error",t),t}}))}zoom(c){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(c),this.emit("zoom",c)}getDecodedData(){return this.decodedData}exportPeaks(){let{channels:c=2,maxLength:p=8e3,precision:y=1e4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.decodedData)throw new Error("The audio has not been decoded yet");const C=Math.min(c,this.decodedData.numberOfChannels),w=[];for(let S=0;S<C;S++){const c=this.decodedData.getChannelData(S),C=[],M=c.length/p;for(let w=0;w<p;w++){const p=c.slice(Math.floor(w*M),Math.ceil((w+1)*M));let S=0;for(let c=0;c<p.length;c++){const y=p[c];Math.abs(y)>Math.abs(S)&&(S=y)}C.push(Math.round(S*y)/y)}w.push(C)}return w}getDuration(){let c=super.getDuration()||0;return 0!==c&&c!==1/0||!this.decodedData||(c=this.decodedData.duration),c}toggleInteraction(c){this.options.interact=c}setTime(c){super.setTime(c),this.updateProgress(c),this.emit("timeupdate",c)}seekTo(c){const p=this.getDuration()*c;this.setTime(p)}playPause(){return t(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(c){this.setTime(this.getCurrentTime()+c)}empty(){this.load("",[[0]],.001)}setMediaElement(c){this.unsubscribePlayerEvents(),super.setMediaElement(c),this.initPlayerEvents()}exportImage(){return t(this,arguments,void 0,(function(){var c=this;let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dataURL";return function*(){return c.renderer.exportImage(p,y,C)}()}))}destroy(){var c;this.emit("destroy"),null===(c=this.abortController)||void 0===c||c.abort(),this.plugins.forEach((c=>c.destroy())),this.subscriptions.forEach((c=>c())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}u.BasePlugin=class extends e{constructor(c){super(),this.subscriptions=[],this.options=c}onInit(){}_init(c){this.wavesurfer=c,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((c=>c()))}},u.dom=w}}]);
//# sourceMappingURL=318.b8cd671b.chunk.js.map