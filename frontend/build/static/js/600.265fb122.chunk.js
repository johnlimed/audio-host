"use strict";(self.webpackChunkaudio_host=self.webpackChunkaudio_host||[]).push([[600],{2415:(e,t,a)=>{a.d(t,{A:()=>DenseTable});var n=a(1806),o=a(3460),i=a(2420),r=a(9650),c=a(4882),s=a(8076),l=a(3336),d=a(3471),h=a(5043),u=a(579);function DenseTable(e){const[t,a]=(0,h.useState)(0);(0,h.useEffect)((()=>{e.focusIndex&&a(e.focusIndex)}),[e.focusIndex]);const renderCol=(a,n)=>{const o=a.map(((t,a)=>(0,u.jsx)(i.A,{component:"th",scope:"row",align:a>0?"right":"left",children:t},"".concat(e.name,"-table-col-").concat(a))));return e.onDelete&&o.push((0,u.jsx)(i.A,{component:"th",scope:"row",align:"center",sx:{verticalAlign:"middle"},children:(0,u.jsx)(d.A,{visibility:t===n?"inherit":"hidden",onClick:()=>{e.onDelete&&e.onDelete(n,a)},sx:{color:"grey"}})},"".concat(e.name,"-table-col-delete"))),o};return(0,u.jsx)(r.A,{component:l.A,children:(0,u.jsxs)(n.A,{size:"small","aria-label":"a dense table",children:[(0,u.jsx)(c.A,{children:(0,u.jsx)(s.A,{children:e.headers.map(((t,a)=>(0,u.jsx)(i.A,{align:a>0?"right":"left",children:t},"".concat(e.name,"-table-header-").concat(a))))})}),(0,u.jsx)(o.A,{children:e.data.map(((t,n)=>(0,u.jsx)(s.A,{hover:n!==e.focusIndex,sx:{"&:last-child td, &:last-child th":{border:0},background:e.focusIndex===n?"lightgreen":"inherit",cursor:"pointer"},onClick:a=>{e.rowOnClick&&e.rowOnClick(a,n,t)},onMouseEnter:()=>{a(n)},children:renderCol(t,n)},"".concat(e.name,"-table-row-").concat(n))))})]})})}},3600:(e,t,a)=>{a.r(t),a.d(t,{default:()=>TrackPlayer});var n=a(3216),o=a(5475),i=a(5043),r=a(6446),c=a(8903),s=a(1906),l=a(35),d=a(9336),h=a(595),u=a(9252),x=a(5865),f=a(6600),m=a(9347),p=a(5316),g=a(8533),k=a(2110),j=a(8911),A=a(6591),C=a(7392),y=a(5258),b=a(2398),v=a(1255),S=a(5040),w=a(1556),I=a(9944),E=a(579);function TrackCard(e){const[t,a]=(0,i.useState)(!0),n=function randomIntFromInterval(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(1,3);return(0,i.useEffect)((()=>{void 0!==e.externalPaused&&a(e.externalPaused)}),[e.externalPaused]),(0,E.jsxs)(k.A,{variant:"outlined",sx:{p:2,width:{xs:"100%",sm:"auto"},display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:"center",gap:2},children:[(0,E.jsx)(A.A,{component:"img",width:"100",height:"100",alt:"".concat(e.id,"-img"),src:"a".concat(n,".png"),sx:{width:{xs:"100%",sm:100}}}),(0,E.jsxs)(j.A,{direction:"column",alignItems:"center",spacing:1,useFlexGap:!0,children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(x.A,{color:"text.primary",fontWeight:"semiBold",children:e.filename}),(0,E.jsx)(x.A,{variant:"caption",color:"text.secondary",fontWeight:"medium",textAlign:"center",sx:{width:"100%"},children:e.id})]}),(0,E.jsxs)(j.A,{direction:"row",alignItems:"center",spacing:1,useFlexGap:!0,children:[(0,E.jsx)(C.A,{id:"track-card-previous","aria-label":"Previous skip",size:"small",onClick:()=>{e.skipPrevious&&e.skipPrevious()},children:(0,E.jsx)(b.A,{fontSize:"small"})}),(0,E.jsx)(C.A,{id:"track-card-rewind","aria-label":"Fast rewind",size:"small",children:(0,E.jsx)(w.A,{fontSize:"small"})}),(0,E.jsx)(C.A,{id:"track-card-play-pause","aria-label":t?"Play music":"Pause music",onClick:e.playOnClick?e.playOnClick:()=>a((e=>!e)),sx:{mx:1},children:t?(0,E.jsx)(S.A,{}):(0,E.jsx)(v.A,{})}),(0,E.jsx)(C.A,{id:"track-card-fastfoward","aria-label":"Fast forward",size:"small",children:(0,E.jsx)(I.A,{fontSize:"small"})}),(0,E.jsx)(C.A,{id:"track-card-next","aria-label":"Next skip",size:"small",onClick:()=>{e.skipNext&&e.skipNext()},children:(0,E.jsx)(y.A,{fontSize:"small"})})]})]})]})}var P=a(2415),B=a(6213),T=a(3762),z=a(5577),F=a(7368),D=a(5075);const formatTime=e=>{const t=Math.floor(e/60),a=Math.round(e)%60,n="0".concat(a).slice(-2);return"".concat(t,":").concat(n)};function TrackWavesurfer(e){const[t,a]=(0,i.useState)(null);return(0,i.useEffect)((()=>{t&&t.destroy();const e=document.createElement("canvas"),n=e.getContext("2d"),o=n.createLinearGradient(0,0,0,1.35*e.height);o.addColorStop(0,"#656666"),o.addColorStop(.7*e.height/e.height,"#656666"),o.addColorStop((.7*e.height+1)/e.height,"#ffffff"),o.addColorStop((.7*e.height+2)/e.height,"#ffffff"),o.addColorStop((.7*e.height+3)/e.height,"#B1B1B1"),o.addColorStop(1,"#B1B1B1");const i=n.createLinearGradient(0,0,0,1.35*e.height);i.addColorStop(0,"#EE772F"),i.addColorStop(.7*e.height/e.height,"#EB4926"),i.addColorStop((.7*e.height+1)/e.height,"#ffffff"),i.addColorStop((.7*e.height+2)/e.height,"#ffffff"),i.addColorStop((.7*e.height+3)/e.height,"#F6B094"),i.addColorStop(1,"#F6B094");const r=T.A.create({container:"#waveform",waveColor:o,progressColor:i,barWidth:2,cursorColor:"#4a74a5",height:80,hideScrollbar:!0,plugins:[z.A.create({lineColor:"#ff0000",lineWidth:2,labelBackground:"#555",labelColor:"#fff",labelSize:"11px"})]});r.on("interaction",(()=>{r.playPause()}));const c=document.querySelector("#hover");document.querySelector("#waveform").addEventListener("pointermove",(e=>c.style.width="".concat(e.offsetX,"px")));const s=document.querySelector("#time"),l=document.querySelector("#duration");r.on("decode",(e=>l.textContent=formatTime(e))),r.on("timeupdate",(e=>s.textContent=formatTime(e)));const d=document.querySelector("#track-card-rewind"),h=document.querySelector("#track-card-fastfoward"),u=document.querySelector("#track-card-play-pause");d.onclick=()=>{r.skip(-30)},h.onclick=()=>{r.skip(30)},u.onclick=()=>{r.playPause()},a(r)}),[]),(0,i.useEffect)((()=>{!async function loadWavesurfer(){if(t&&e.trackId){const a=sessionStorage.getItem("jwt"),n="".concat(F.s.LOCAL).concat(D.L.TRACK,"/").concat(e.trackId),o=await B.A.get(n,{headers:{Authorization:"Bearer ".concat(a)},responseType:"blob"});await t.loadBlob(o.data)}}()}),[e.trackId,t]),(0,E.jsxs)("div",{id:"waveform",onClick:e.onClick,children:[(0,E.jsx)("div",{id:"time",children:"0:00"}),(0,E.jsx)("div",{id:"duration",children:"0:00"}),(0,E.jsx)("div",{id:"hover"})]})}function TrackPlayer(){const[e,t]=(0,i.useState)(0),[a,k]=(0,i.useState)([]),[j,A]=(0,i.useState)(!0),[C,y]=(0,i.useState)(""),[b,v]=(0,i.useState)(""),{tracks:S}=(0,n.LG)(),closeDialog=()=>{y("")},w=(0,i.useCallback)((async(e,t)=>{console.log(t),y("You are about to delete track ".concat(t[0])),v(t[0])}),[]);(0,i.useEffect)((()=>{if(S&&S.length>0){const e=S.map((e=>[e.id,e.filename]));k(e),t(0)}}),[S]);const handleRowClick=(e,a)=>{void 0!==a&&(t(a),A(!0))},I=(0,i.useCallback)((()=>{const a=e+1;a<S.length&&t(a)}),[e,S.length]),B=(0,i.useCallback)((()=>{const a=e-1;a>=0&&t(a)}),[e]);return(0,E.jsxs)(r.A,{sx:{bgcolor:"background.default"},children:[(0,E.jsx)(u.A,{id:"features",sx:{py:{xs:8,sm:16}},children:(()=>{const t=S[e];return t?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(c.Ay,{container:!0,spacing:6,sx:{mb:"20px"},children:(0,E.jsx)(c.Ay,{item:!0,xs:12,children:(0,E.jsx)(TrackWavesurfer,{trackId:S[e].id,onClick:()=>{A(!j)}})})}),(0,E.jsxs)(c.Ay,{container:!0,sx:{mb:"20px"},justifyContent:"center",spacing:2,children:[(0,E.jsx)(c.Ay,{item:!0,xs:4,children:(0,E.jsx)(TrackCard,{id:t.id,externalPaused:j,filename:t.filename,playOnClick:()=>{A(!j)},skipNext:I,skipPrevious:B})}),(0,E.jsx)(c.Ay,{item:!0,xs:8,children:(0,E.jsx)(P.A,{name:"Track list",headers:["id","Track name",""],data:a,focusIndex:e,rowOnClick:handleRowClick,onDelete:w})})]})]}):(0,E.jsx)(c.Ay,{container:!0,children:(0,E.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,E.jsx)(x.A,{variant:"h1",component:"h2",children:"No tracks just yet, upload one to get started :)"})})})})()}),(0,E.jsx)(d.A,{}),(0,E.jsxs)(l.A,{open:!!C,onClose:closeDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,E.jsx)(f.A,{id:"alert-dialog-title",children:"Are you sure?"}),(0,E.jsx)(p.A,{children:(0,E.jsx)(g.A,{id:"alert-dialog-description",children:C})}),(0,E.jsxs)(m.A,{children:[(0,E.jsx)(s.A,{onClick:closeDialog,children:"Cancel"}),(0,E.jsxs)(o.lV,{method:"DELETE",children:[(0,E.jsx)(h.A,{id:"dialog-input-delete",name:"dialog-input-delete",sx:{display:"none"},value:b}),(0,E.jsx)(s.A,{type:"submit",autoFocus:!0,onClick:closeDialog,children:"Confirm"})]})]})]})]})}}}]);
//# sourceMappingURL=600.265fb122.chunk.js.map